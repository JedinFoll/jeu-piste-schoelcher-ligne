
<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Jeu de Piste â€“ SchÅ“lcher</title>
<link href="https://fonts.googleapis.com/css2?family=Alfa+Slab+One&display=swap" rel="stylesheet">
<style>
  :root{
    --ink:#f5f0e6;
    --marron:#5a2e0c;
    --marron-light:#7a3e21;
    --marron-dark:#2d1405;
    --parch:#fffdf4;
    --frame:#a97442;
    --shadow:rgba(0,0,0,.4);
  }
  *{box-sizing:border-box}
  body{
    font-family: 'Trebuchet MS', Arial, sans-serif;
    background: var(--marron);
    margin:0; padding:24px; line-height:1.6; color:var(--ink);
  }

  .hero{
    background: var(--marron-light);
    border:3px solid var(--frame);
    border-radius:12px;
    padding:18px;
    margin-bottom:18px;
    box-shadow: 4px 4px 8px var(--shadow);
  }
  .hero h1{
    font-family:'Alfa Slab One', serif;
    color:#f5e1c4;
    text-shadow:2px 2px 0 var(--marron-dark);
    margin:0 0 .5rem;
  }
  .hero p{margin:.25rem 0 0; color:#f0e6d2}

  .card{
    background: var(--parch);
    border: 2px solid var(--frame);
    border-radius: 12px;
    padding: 18px;
    margin-top:16px;
    color:#2d1a0a;
    box-shadow: 3px 3px 6px var(--shadow);
  }
  h2{font-family:'Alfa Slab One', serif; color:var(--marron-dark)}
  .row{display:flex;gap:.6rem;flex-wrap:wrap;margin:.4rem 0 1rem}

  .btn{
    display:inline-block; padding:10px 16px; border-radius:8px;
    text-decoration:none; font-weight:700;
    border:2px solid var(--frame); background:#d4a373;
    color:#2d1a0a; cursor:pointer;
    box-shadow:2px 2px 4px var(--shadow);
    transition:transform .18s, background .18s, color .18s;
  }
  .btn:hover{ background:#b97d4e; color:#fffbea; transform:scale(1.05) }
  .btn.primary{ background:var(--marron-light); color:#fffbea; border-color:var(--marron-dark) }
  .btn.primary:hover{ background:var(--marron-dark) }

  input[type=text]{padding:10px 12px;border:2px solid var(--frame);border-radius:10px;min-width:220px;background:#fff;color:#2d1a0a;}

  .badge{display:inline-block;padding:.25rem .5rem;border-radius:.5rem;border:2px solid #ccc;font-size:.85rem}
  .ok{background:#e9fbe9;border-color:#bfe9bf;color:#164a16}
  .ko{background:#fff0f0;border-color:#f2c1c1;color:#7b1a1a}

  .map-wrap{position:relative;width:100%;overflow:auto;background:#faf3e0;border:2px solid #a97442;border-radius:12px}
  .map-frame{width:100%;height:min(80vh,700px);display:flex;align-items:center;justify-content:center}
  .map-img{max-height:100%;max-width:100%;display:block; border-radius:8px}
  .map-tools{position:absolute;right:12px;top:12px;display:flex;gap:6px}

  .hr{height:2px;margin:16px 0;background:#7a3e21}
  .enigme{display:none}
</style>
</head>
<body>
  <div class="hero">
    <h1>Jeu de Piste â€“ SchÅ“lcher</h1>
    <p>Munis-toi de papier et crayon, scanne les QR codes et rÃ©sous les Ã©nigmes.</p>
  </div>

  <!-- AccÃ¨s -->
  <section class="card" id="acces">
    <h2>AccÃ¨s au jeu</h2>
    
    <!-- Paiement -->
    <div class="row">
      <a class="btn primary" target="_blank" rel="noopener"
         href="https://www.paypal.com/ncp/payment/GLM2FB7ERYXKQ">ðŸ’³ Payer 10 â‚¬ (PayPal)</a>
    </div>
    
    <!-- Envoi SMS -->
    <div class="row">
      <input type="text" id="payerName" value="INARI" readonly />
      <input type="text" id="payerTxn" placeholder="NÂ° de paiement PayPal" />
      <button class="btn" id="btnEnvoyerSMS">Envoyer la preuve par SMS</button>
    </div>

    <!-- EntrÃ©e du code -->
    <div class="row">
      <input type="text" id="codeInput" placeholder="Entrer le code dâ€™accÃ¨s reÃ§u" />
      <button class="btn" id="btnValiderCode">Valider le code</button>
    </div>

    <p class="muted" id="txtValidity"></p>
    <p><strong id="txtStart"></strong></p>
    <p>Statut : <span id="badge" class="badge ko">verrouillÃ©</span></p>
    <div class="hr"></div>
    <div class="row">
      <button class="btn primary" id="btnCommencer" disabled>Commencer le jeu</button>
      <button class="btn" id="btnScanner" disabled>Scanner le QR code</button>
    </div>
  </section>

  <!-- Carte -->
  <section class="card">
    <h2>Carte du parcours</h2>
    <div class="map-wrap">
      <div class="map-tools">
        <a class="btn" download href="carte-schoelcher.jpg">TÃ©lÃ©charger</a>
      </div>
      <div class="map-frame">
        <img class="map-img" id="mapImg" src="carte-schoelcher.jpg" alt="Carte du jeu de piste Ã  SchÅ“lcher">
      </div>
    </div>
  </section>

  <!-- Ã‰nigmes -->
  <section id="bloc-enigmes" class="card" style="display:none;">
    <h2>Ã‰nigmes</h2>
    <p id="txtVisibility"></p>
    <article id="enigme1" class="enigme">
      <h3>Ã‰nigme 1</h3>
      <p><em>(Ton Ã‰NIGME 1 ici)</em></p>
    </article>
    <article id="enigme2" class="enigme">
      <h3>Ã‰nigme 2</h3>
      <p><em>(Ton Ã‰NIGME 2 ici)</em></p>
    </article>
    <article id="enigme3" class="enigme">
      <h3>Ã‰nigme 3</h3>
      <p><em>(Ton Ã‰NIGME 3 ici)</em></p>
    </article>
    <article id="enigme4" class="enigme">
      <h3>Ã‰nigme 4</h3>
      <p><em>(Ton Ã‰NIGME 4 ici)</em></p>
    </article>
    <article id="fin" class="enigme">
      <h3>Bravo ðŸŽ‰</h3>
      <p>Tu as terminÃ© le parcours !</p>
    </article>
  </section>

<script>
  const CONTACT_PHONE = "+596696327693";
  const ACCESS_CODE = "SCHOELCHER-10";
  const LS_KEY = "jp_schoelcher_marron";

  // Texte explicatif avec validitÃ©
  const TEXT_VALIDITY   = "Pour recevoir le code, envoie ton numÃ©ro de paiement PayPal par SMS. Tu recevras alors le code dâ€™accÃ¨s Ã  entrer ci-dessus (valable 1 semaine). Une fois validÃ©, appuie sur Â« Commencer le jeu Â» pour dÃ©marrer lâ€™aventure.";
  const TEXT_START      = "Le jeu commence aprÃ¨s avoir appuyÃ© sur Â« Commencer le jeu Â».";
  const TEXT_VISIBILITY = "Seule lâ€™Ã‰nigme 1 est visible au dÃ©part. Pour dÃ©bloquer les suivantes, scanne les bons QR codes dans lâ€™ordre.";

  document.getElementById("txtValidity").innerText = TEXT_VALIDITY;
  document.getElementById("txtStart").innerText = TEXT_START;
  document.getElementById("txtVisibility").innerText = TEXT_VISIBILITY;

  const badge = document.getElementById("badge");
  const btnCommencer = document.getElementById("btnCommencer");
  const blocEnigmes = document.getElementById("bloc-enigmes");

  function setAccess(ok){
    if(ok){
      localStorage.setItem(LS_KEY,"1");
      btnCommencer.disabled=false;
      badge.textContent="dÃ©verrouillÃ©";
      badge.classList.remove("ko"); badge.classList.add("ok");
    }else{
      localStorage.removeItem(LS_KEY);
      btnCommencer.disabled=true;
      badge.textContent="verrouillÃ©";
      badge.classList.remove("ok"); badge.classList.add("ko");
    }
  }
  setAccess(localStorage.getItem(LS_KEY)==="1");

  btnCommencer.addEventListener("click",()=>{
    blocEnigmes.style.display="block";
    document.getElementById("enigme1").style.display="block";
  });
</script>
</body>
</html>
